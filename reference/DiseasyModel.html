<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Base module for diseasy model templates — DiseasyModel • diseasy</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Base module for diseasy model templates — DiseasyModel"><meta name="description" content='The DiseasyModel module implements common functionality that all models have available beyond that provided by
DiseasyBaseModule.
Most notably, the model module facilitates:
Module interfaces:
The module contains the functional modules via its active bindings:
$activity: DiseasyActivity
$observables: DiseasyObservables
$season: DiseasySeason
$variant : DiseasyVariant


Configured instances of these modules can be provided during initialisation.
Alternatively, default instances of these modules can optionally be created.
Model interface:
The module defines the functions $get_results(), $get_training_data() and the $parameters binding.
These functions define the "API" of the models and ensure the models can take part in the ensemble.

'><meta property="og:description" content='The DiseasyModel module implements common functionality that all models have available beyond that provided by
DiseasyBaseModule.
Most notably, the model module facilitates:
Module interfaces:
The module contains the functional modules via its active bindings:
$activity: DiseasyActivity
$observables: DiseasyObservables
$season: DiseasySeason
$variant : DiseasyVariant


Configured instances of these modules can be provided during initialisation.
Alternatively, default instances of these modules can optionally be created.
Model interface:
The module defines the functions $get_results(), $get_training_data() and the $parameters binding.
These functions define the "API" of the models and ensure the models can take part in the ensemble.

'><meta property="og:image" content="https://ssi-dk.github.io/diseasy/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">diseasy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/diseasy.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Functional modules</h6></li>
    <li><a class="dropdown-item" href="../articles/diseasy-activity.html">DiseasyActivity</a></li>
    <li><a class="dropdown-item" href="../articles/diseasy-observables.html">DiseasyObservables</a></li>
    <li><a class="dropdown-item" href="../articles/diseasy-season.html">DiseasySeason</a></li>
    <li><a class="dropdown-item" href="../articles/diseasy-variant.html">DiseasyVariant</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Developer guides</h6></li>
    <li><a class="dropdown-item" href="../articles/creating-a-model.html">Creating a model</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ssi-dk/diseasy/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Base module for diseasy model templates</h1>
      <small class="dont-index">Source: <a href="https://github.com/ssi-dk/diseasy/blob/main/R/DiseasyModel.R" class="external-link"><code>R/DiseasyModel.R</code></a></small>
      <div class="d-none name"><code>DiseasyModel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>DiseasyModel</code> module implements common functionality that all models have available beyond that provided by
<code>DiseasyBaseModule</code>.</p>
<p>Most notably, the model module facilitates:</p><ul><li><p>Module interfaces:
The module contains the functional modules via its active bindings:</p><ul><li><p><code>$activity</code>: <code>DiseasyActivity</code></p></li>
<li><p><code>$observables</code>: <code>DiseasyObservables</code></p></li>
<li><p><code>$season</code>: <code>DiseasySeason</code></p></li>
<li><p><code>$variant</code> : <code>DiseasyVariant</code></p></li>
</ul><p>Configured instances of these modules can be provided during initialisation.
Alternatively, default instances of these modules can optionally be created.</p></li>
<li><p>Model interface:
The module defines the functions <code>$get_results()</code>, <code>$get_training_data()</code> and the <code>$parameters</code> binding.
These functions define the "API" of the models and ensure the models can take part in the ensemble.</p></li>
</ul></div>


    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A new instance of the <code>DiseasyModel</code> <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> class.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="https://s-fleck.github.io/lgr/reference/lgr-package.html" class="external-link">lgr</a></p>
<p><a href="DiseasyObservables.html">DiseasyObservables</a></p>
<p><a href="DiseasyActivity.html">DiseasyActivity</a></p>
<p><a href="DiseasyObservables.html">DiseasyObservables</a></p>
<p><a href="DiseasySeason.html">DiseasySeason</a></p>
<p><a href="DiseasyVariant.html">DiseasyVariant</a></p></div>
    </div>
    <div class="section level2">
    <h2 id="super-class">Super class<a class="anchor" aria-label="anchor" href="#super-class"></a></h2>
    <p><code><a href="DiseasyBaseModule.html">diseasy::DiseasyBaseModule</a></code> -&gt; <code>DiseasyModel</code></p>
    </div>
    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>activity</code></dt>
<dd><p>(<code>diseasy::activity</code>)<br>
The local copy of an activity module. Read-only.</p></dd>


<dt><code>observables</code></dt>
<dd><p>(<code><a href="DiseasyObservables.html">diseasy::DiseasyObservables</a></code>)<br>
The local copy of a DiseasyObservables module. Read-only.</p></dd>


<dt><code>season</code></dt>
<dd><p>(<code>diseasy::season</code>)<br>
The local copy of a season module. Read-only.</p></dd>


<dt><code>variant</code></dt>
<dd><p>(<code>diseasy::variant</code>)<br>
The local copy of a variant module. Read-only.</p></dd>


<dt><code>parameters</code></dt>
<dd><p>(<code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
The parameters used in the model. Read-only.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-DiseasyModel-new"><code>DiseasyModel$new()</code></a></p></li>
<li><p><a href="#method-DiseasyModel-get_results"><code>DiseasyModel$get_results()</code></a></p></li>
<li><p><a href="#method-DiseasyModel-get_training_data"><code>DiseasyModel$get_training_data()</code></a></p></li>
<li><p><a href="#method-DiseasyModel-clone"><code>DiseasyModel$clone()</code></a></p></li>
</ul></div><p><details open><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="diseasy" data-topic="DiseasyBaseModule" data-id="finalize"><a href="DiseasyBaseModule.html#method-finalize"><code>diseasy::DiseasyBaseModule$finalize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="diseasy" data-topic="DiseasyBaseModule" data-id="load_module"><a href="DiseasyBaseModule.html#method-load_module"><code>diseasy::DiseasyBaseModule$load_module()</code></a></span></li>
<li><span class="pkg-link" data-pkg="diseasy" data-topic="DiseasyBaseModule" data-id="set_moduleowner"><a href="DiseasyBaseModule.html#method-set_moduleowner"><code>diseasy::DiseasyBaseModule$set_moduleowner()</code></a></span></li>
</ul></details></p><hr><a id="method-DiseasyModel-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Creates a new instance of the <code>DiseasyModel</code> <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> class.
This module is typically not constructed directly but rather through <code>DiseasyModel*</code> classes.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/DiseasyModel.html">DiseasyModel</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  activity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  observables <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  season <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  variant <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>activity, observables, season, variant</code></dt>
<dd><p>(<code>boolean</code> or <code>R6::R6Class instance</code>)<br>
If a boolean is given, it dictates whether to load a new instance module of this class.</p>
<p>If an instance of the module is provided instead, a copy of this instance is added to the <code>DiseasyModel</code>
instance. This copy is a "clone" of the instance at the time it is added and any subsequent changes to the
instance will not reflect in the copy that is added to <code>DiseasyModel</code>.</p></dd>


<dt><code>parameters</code></dt>
<dd><p>(<code>named list()</code>)<br>
List of parameters to set for the model during initialization.</p>
<p>Each model has their own parameters.</p>
<p>Common parameters are:</p><ul><li><p><code>training_length</code> (<code>named numeric</code>)<br>   The number of days that should be included in the training splits of the data for the model.   Allowed splits are: "training", "testing", and "validation".</p></li>
</ul></dd>


<dt><code>label</code></dt>
<dd><p>(<code>character</code>)<br>
A human readable label for the model instance.</p></dd>


<dt><code>...</code></dt>
<dd><p>Parameters sent to <code>DiseasyBaseModule</code> <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> constructor</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>The <code>DiseasyModel</code> is the main template that the individual models should inherit from since this defines the
set of methods the later framework expects from each model. In addition, it provides the main interface with
the other modules of the framework.</p>
</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A new instance of the <code>DiseasyModel</code> <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> class.</p>
</div>

</div><p></p><hr><a id="method-DiseasyModel-get_results"></a><div class="section">
<h3 id="method-get-results-">Method <code>get_results()</code><a class="anchor" aria-label="anchor" href="#method-get-results-"></a></h3>
<p>The primary method used to request model results of a given observable at a given stratification</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DiseasyModel</span><span class="op">$</span><span class="fu">get_results</span><span class="op">(</span></span>
<span>  <span class="va">observable</span>,</span>
<span>  <span class="va">prediction_length</span>,</span>
<span>  quantiles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stratification <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>observable</code></dt>
<dd><p>(<code>character</code>)<br> The observable to provide data or prediction for.</p></dd>


<dt><code>prediction_length</code></dt>
<dd><p>(<code>numeric</code>)<br> The number of days to predict. The prediction start is defined by <code>last_queryable_date</code> of the <code>DiseasyObservables</code> <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> class.</p></dd>


<dt><code>quantiles</code></dt>
<dd><p>(<code>list</code>(<code>numeric</code>))<br> Default NULL. If given, results are returned at the quantiles given.</p></dd>


<dt><code>stratification</code></dt>
<dd><p>(<code>list</code>(<code>quosures</code>))<br> Default NULL. Use <code>rlang::quos(...)</code> to specify stratification. If given, expressions in stratification evaluated to give the stratification level.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>A <code>tibble</code> <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a> with predictions at the level specified by stratification level. In addition to stratification columns, the output has the columns:<br>   date (<code>Date</code>) specifying the date of the prediction<br>   realization_id (<code>character</code>) giving a unique id for each realization in the ensemble<br>   model (<code>character</code>) the name (classname) of the model used to provide the prediction.</p>
</div>

</div><p></p><hr><a id="method-DiseasyModel-get_training_data"></a><div class="section">
<h3 id="method-get-training-data-">Method <code>get_training_data()</code><a class="anchor" aria-label="anchor" href="#method-get-training-data-"></a></h3>
<p>A method that returns training data for the models based on the model value of <code>training_length</code> and
the <code>last_queryable_date</code> of the <code>DiseasyObservables</code> module.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DiseasyModel</span><span class="op">$</span><span class="fu">get_training_data</span><span class="op">(</span><span class="va">observable</span>, stratification <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>observable</code></dt>
<dd><p>(<code>character</code>)<br> The observable to provide data or prediction for.</p></dd>


<dt><code>stratification</code></dt>
<dd><p>(<code>list</code>(<code>quosures</code>))<br> Default NULL. Use <code>rlang::quos(...)</code> to specify stratification. If given, expressions in stratification evaluated to give the stratification level.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>The output of <code>DiseasyObservables$get_observation</code> constrained to the training period.</p>
</div>

</div><p></p><hr><a id="method-DiseasyModel-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">DiseasyModel</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="co"># Normally, one would not want to create this module directly, but it is possible.</span></span></span>
<span class="r-in"><span>  <span class="va">Model_module</span> <span class="op">&lt;-</span> <span class="va">DiseasyModel</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">Model_module</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rasmus Skytte Randløv, Marcus Munch Grünewald, Lasse Engbo Christiansen, Kaare Græsbøll, <a href="https://www.ssi.dk/" class="external-link"><img src="https://www.ssi.dk/assets/images/ssi-logo-optimeret.svg" alt="SSI" height="64" style="margin-bottom: 0.5em; margin-top: 1.5em;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

